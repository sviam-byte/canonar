---
import '../../styles/global.css';
import siteIndex from '@/data/index.json';

export function getStaticPaths() {
  return siteIndex.branches.map((b) => ({ params: { branch: b.name } }));
}

const { branch } = Astro.params;
const current = siteIndex.branches.find((b) => b.name === branch);
---
<html lang="ru">
  <head><meta charset="utf-8" /><title>{branch} · Канонар</title></head>
  <body>
    <main class="container">
      <h1>Ветка: {branch}</h1>
      {current ? (
        <ul>
          {current.types.map((t) => (
            <li><a href={`/b/${branch}/list/${encodeURIComponent(t)}`}>{t}</a></li>
          ))}
        </ul>
      ) : (
        <p>Эта ветка не найдена.</p>
      )}
    </main>
  </body>
</html>
