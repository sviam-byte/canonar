---
import '../../../styles/global.css';
import siteIndex from '@/data/index.json';

export function getStaticPaths() {
  return siteIndex.branches.flatMap((b) =>
    b.types.map((t) => ({ params: { branch: b.name, type: t } }))
  );
}

const { branch, type } = Astro.params;
const entries = (await import(`@/data/b/${branch}/${type}.json`)).default;
---
<html lang="ru">
  <head><meta charset="utf-8" /><title>{type} · {branch} · Канонар</title></head>
  <body>
    <main class="container">
      <h1>{type} – {branch}</h1>
      <ul>
        {entries.map((e) => (
          <li><a href={`/b/${branch}/e/${type}/${e.slug}`}>{e.title}</a></li>
        ))}
      </ul>
    </main>
  </body>
</html>
